<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

            <!-- ===== CSS ======= -->
            <link rel="stylesheet" href="style_Pacientes_Listado.css">
            
            <!-- Iconscout CSS     -->
            <LInk rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css"></LInk>
            <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

            <LInk rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css"></LInk>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>Listado/Ingresar Paciente</title>
       
       <style>
            table, th, td{
                /* border: 0px solid; */
                border-radius: 10px;
            }

            table{
                /* width: 80%; */
                border-collapse: collapse;
            }
        </style>
            <!-- jQuery -->

    <title>Listado de Pacientes</title>
 </head>

 <body>
    <h2>Listado de Pacientes</h2>
        
            <form action="uil uil-user-plu" method="post" name="search">                
                <ion-icon name="search-outline"></ion-icon>
                <input type="text" name="campo" id="campo" placeholder="Buscar Paciente">
            </form>
            <p></p>

            <button onclick="openModal()">Agregar Paciente
            <i class="uil uil-user-plus" name="iconoPaciente"></i>
            </button>

            <p></p>
            
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
            <script>
                $(document).ready(function(){
                    var tableOffset = $(".table-container").offset().top;
            
                    $(window).scroll(function(){
                        var scroll = $(window).scrollTop();
                        if (scroll >= tableOffset) {
                            $(".table-container table thead").addClass("fixed-header");
                        } else {
                            $(".table-container table thead").removeClass("fixed-header");
                        }
                    });
                });
            </script>
            
            <style>

                    /* Estilo para la cabecera de la tabla */
                    .table-container table thead {
                    background-color: #f2f2f2; /* Fondo gris claro */
                    font-weight: bold; /* Texto en negrita */
                    }
                /* Estilo para la cabecera de la tabla fija */
                .table-container table thead.fixed-header {
                    position: fixed; /* Fija la cabecera en la parte superior */
                    top: 0; /* Fija la cabecera en la parte superior */
                    z-index: 1; /* Asegura que la cabecera esté por encima del contenido de la tabla */
                    background-color: white; /* Fondo blanco para cubrir el contenido cuando se desplaza */
                    width: calc(100% - 17px); /* Establece el mismo ancho que la tabla, considerando el ancho del scrollbar */
                }
                
            </style>


        <div class="table-container">
         <table>
        <thead>
            <!-- <th>IdPaciente</th> -->
            <th>Nombre</th>
            <th>Apellido</th>
            <th>Cedula</th>
            <th>Celular</th>
            <th>Direccion</th>
            <!-- <th>Edad</th> -->
            <!-- <th>Sexo</th> -->
            <th>Cumpleaños</th>  <!-- En base de datos, cumpleaños -->
            <th>Email</th>
            <!-- <th>Nombre Y Apellido</th> -->
            <!-- <th>Celular</th> -->
            <!-- <th>Parentesco</th> -->
            <!-- <th></th> Editar -->
            <!-- <th></th> Eliminar -->
        </thead>

        <tbody id="content">

        </tbody>
    </table>
    </div>

    <script>
        $(document).ready(function(){
            var tableOffset = $(".table-container").offset().top;

            $(window).scroll(function(){
                var scroll = $(window).scrollTop();
                if (scroll >= tableOffset) {
                    $(".table-container table thead").addClass("fixed-header");
                    // Ajusta el ancho de las celdas de la cabecera
                    $(".table-container table thead th").each(function(index) {
                        $(this).width($(".table-container table tbody tr:first-child td").eq(index).width());
                    });
                } else {
                    $(".table-container table thead").removeClass("fixed-header");
                }
            });
        });
    </script>
    
<script>

    getData()
    document.getElementById("campo").addEventListener("keyup", getData)
    function getData(){
        let input = document.getElementById("campo").value
        let content = document.getElementById("content")
        let url = "load_Cargar_Datos.php" //<!--Tambien puede ser una ruta-->
        let formData = new FormData()
        formData.append('campo', input)

        fetch(url, {
            method: "POST",
            body: formData
        }).then(Response => Response.json())
        .then(data => {
            content.innerHTML = data
        }).catch(err => console.log(err))
    }
</script>

<!-- Modal Ingresar pacientes  -->
<dialog class= "modal" id="mainModal">

    <div class="container">
        <header>Ingresar Paciente</header>

        <form action="AgregarPaciente.php" method="POST" action="#">
            <div class="form first">
                <div class="details personal">
                    <span class="title">Datos Del Paciente</span>

                    <div class="fields">
                        <!-- <div class="input-field">
                            <label for="">ID_de_cliente</label>
                            <input type="text" placeholder="" required>
                        </div> -->
                        <div class="input-field">
                            <label for="">Nombre</label>
                            <input type="text" placeholder="Ingrese Nombre" name="nombre" required>
                        </div>

                        <div class="input-field">
                            <label for="">Apellido</label>
                            <input type="text" placeholder="Ingrese Apellidos" name="apellido" required>
                        </div>

                        <div class="input-field">
                            <label for="">Cedula</label>
                            <input type="text" placeholder="Ingrese Cedula" name="cedula" required>
                        </div>

                        <div class="input-field">
                            <label for="">Celular</label>
                            <input type="text" placeholder="Ingrese Numero Celular" name="celular" required>
                        </div>

                        <div class="input-field">
                            <label for="">Direccion</label>
                            <input type="text" placeholder="Ingrese Direccion Residencial" name="direccion" required>
                        </div>

                        <div class="input-field">
                            <label for="">Edad</label>
                            <input type="text" placeholder="Ingrese la Edad" name="edad" required>
                        </div>

                        <div class="input-field">
                            <label for="">Sexo</label>
                            <select name="sexo">
                                <option selected="selected">Selecciona Sexo...</option>
                                <option>Masculino</option>
                                <option>Femenino</option>
                                <option>Prefiere no Decir</option>
                            </select>
                            <!-- <input type="text" placeholder="Ingrese el Sexo" required> -->
                        </div>

                        <div class="input-field">
                            <label for="">Fecha de Nacimiento</label>
                            <input type="date" placeholder="" name="fechaNacimiento" required>
                        </div>

                        <div class="input-field">
                            <label for="">Email</label>
                            <input type="email" placeholder="Ingrese Correo Electronico" name="email" required>
                        </div>
                    </div>
                </div>

                <div class="details personal">
                    <span class="title">Contacto de Emergencia</span>

                    <div class="fields">
                        <div class="input-field">
                            <label for="">Nombre y Apellido</label>
                            <input type="text" placeholder="Ingrese Nombre y Apellido" name="nombreYApellido" required>
                        </div>

                        <div class="input-field">
                            <label for="">Celular</label>
                            <input type="number" placeholder="Ingrese Numero" name="celular1" required>
                        </div>

                        <div class="input-field">
                            <label for="">Parentesco</label>
                            <input type="text" placeholder="Madre/Padre/Amigo..." name="parentesco"required>
                        </div>
                    </div>

                    <button class="saveBtn">
                        <span class="btnText">Guardar</span>
                        <i class="uil uil-save"></i>
                    </button>

                </div>
            </div>
        </form>
    </div>

    <a href=""></a>
    <script src="modal.js"></script>
</dialog>
</body>
</html>